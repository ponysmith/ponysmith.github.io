(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(a.pinnd=b(c))})}else{a.pinnd=b(a.jQuery)}}(this,function(a){return function(d,b){var g=null;var h=null;var e={placeholder:"pinnd-placeholder",pinned:"pinnd",pinnedtop:"pinnd-top",pinnedbottom:"pinnd-bottom"};var j={autoenable:true,context:"body",offset_top:0,offset_bottom:0};var f=[];var c=a(window);var k={init:function(m,l){a.extend(j,l);m.each(function(){var n={};n.status="unpinned";n.jq=a(this);n.context=(n.jq.parents(j.context).length)?n.jq.parents(j.context):a("body");if(n.context.css("position")=="static"){n.context.css("position","relative")}n.styles=n.jq.attr("style");f.push(n)});if(j.autoenable){i.on()}return i},enable:function(l){var m=l.ph||a("<div />").addClass(e.placeholder);m.css(l.jq.css(["float","position","clear","display","top","left","right","bottom"]));m.css({height:l.jq.outerHeight(true),width:l.jq.outerWidth(true)});l.ph=m;l.jq.wrap(m);l.jq.css("position","static");k.setPinPoints(l);k.check(l)},disable:function(l){if(l.jq.parent("."+e.placeholder).length){l.jq.unwrap()}k.unpin(l)},scroll:function(){for(var n=0,m=f.length;n<m;n++){var o=f[n];k.check(o)}},resize:function(){if(!g){return false}for(var n=0,m=f.length;n<m;n++){var o=f[n];if(o.jq.parent("."+e.placeholder).length){o.jq.unwrap()}k.unpin(o);k.enable(o);k.check(o)}},setPinPoints:function(l){l.min=(l.status=="unpinned")?l.jq.offset().top-j.offset_top:l.ph.offset().top-j.offset_top;l.max=(l.context.offset().top+l.context.outerHeight(true))-(l.jq.outerHeight(true)+j.offset_top+j.offset_bottom)},check:function(l){switch(true){case (l.min<0||c.scrollTop()<=l.min):k.unpin(l);break;case (c.scrollTop()>=l.max):k.pinToBottom(l);break;default:k.pinToTop(l);break}},pinToTop:function(l){if(l.status=="pinned-top"){return}l.status="pinned-top";l.jq.css({position:"fixed",height:l.jq.height(),width:l.jq.width(),top:j.offset_top,bottom:"auto"});l.jq.removeClass(e.pinnedbottom).addClass(e.pinnedtop).addClass(e.pinned);if(typeof j.onpintop=="function"){j.onpintop(l.jq)}},pinToBottom:function(l){if(l.status=="pinned-bottom"){return}if(l.status!="pinned-top"){k.pinToTop(l)}l.status="pinned-bottom";l.jq.css({position:"absolute",top:"auto",bottom:j.offset_bottom});l.jq.removeClass(e.pinnedtop).addClass(e.pinnedbottom).addClass(e.pinned);if(typeof j.onpinbottom=="function"){j.onpinbottom(l.jq)}},unpin:function(l){l.status="unpinned";l.jq.removeAttr("style").attr("style",l.styles);l.jq.removeClass(e.pinnedtop).removeClass(e.pinnedbottom).removeClass(e.pinned);if(typeof j.onunpin=="function"){j.onunpin(l.jq)}}};var i={on:function(){g=true;c.on("scroll",k.scroll);c.on("resize",k.resize);for(var n=0,m=f.length;n<m;n++){var o=f[n];k.enable(o)}},off:function(){g=false;c.off("scroll",k.scroll);for(var n=0,m=f.length;n<m;n++){var o=f[n];k.disable(o)}},};return k.init(d,b)}}));